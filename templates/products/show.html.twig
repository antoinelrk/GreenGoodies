{% extends 'base.html.twig' %}

{% block title %}Voir le produit{% endblock %}

{% block body %}
<div class="flex max-h-screen overflow-hidden font-inter h-full" style="background-color: #FFFDF7">
    <div class="w-1/2">
        <img class="object-cover w-full aspect-square" src="{{ product.picture }}" alt="">
    </div>

    <div class="flex flex-col w-1/2 justify-center pt-24 px-32">
        <div class="flex flex-col space-y-8">
            <h1 class="text-2xl font-medium">{{ product.name }}</h1>

            <p class="text-4xl font-thin">{{ product.getFormattedPriceInCurrency }}</p>

            <div class="mt-12 text-gray-400">
                <h2 class="text-sm font-medium">Description</h2>

                <p class="mt-3 text-lg">{{ product.description }}</p>
            </div>
        </div>

        {# path('cart.add', { id: product.id }) #}
{#        Si le produit est dans le panier, on affiche le bouton "Mettre à jour", sinon on affiche ajouter au panier.#}
{#        Penser à ajouter la quantité actuelle dans le panier si le produit y est déjà.#}
        {% if app.user %}
            <form
                class="mt-auto flex flex-col space-y-8"
                action="{{ path('cart.update', { id: product.id }) }}"
            >
                <label
                    for="quantity"
                    class="block mb-2 text-sm font-medium text-gray-900"
                >
                    Quantité
                </label>

                <input
                    type="number"
                    id="quantity"
                    name="quantity"
                    value="{{ item.quantity ?? 1 }}"
                    min="0"
                    class="bg-white border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 block w-full p-4"
                >

                <button
                    class="flex justify-center w-full mx-auto mt-auto mb-8 bg-neutral-600 py-8 text-white cursor-pointer hover:bg-neutral-500"
                >
                    {{ item ? 'Mettre à jour' : 'Ajouter au panier' }}
                </button>
            </form>
        {% else %}
            <a
                class="flex justify-center w-full mx-auto mt-auto mb-8 bg-neutral-600 py-8 text-white cursor-pointer hover:bg-neutral-500"
                href="{{ path('app_login') }}"
            >
                Me connecter pour ajouter au panier
            </a>
        {% endif %}
    </div>
</div>
{% endblock %}
